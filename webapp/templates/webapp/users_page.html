{% extends 'base.html' %}
{% load static %}

{% block title %}SafeSite Users{% endblock %}
{% block css_files %}
    <link rel="stylesheet" href="{% static 'webapp/users_page/css/users_page.css' %}">
{% endblock %}

{% block content %}
{% include 'header.html' %}{% with title="Users Page" %}{% endwith %}

<div class="container">
    <div class="row">
        <a class="btn btn-secondary add-user-button" role="button" href="{% url 'add_user_page' %}">Add User</a>
        <table class="table table-dark table-striped">
            <thead>
                <tr>
                    <th scope="col">First Name</th>
                    <th scope="col">Last Name</th>
                    <th scope="col">Email</th>
                    <th scope="col">Company</th>
                    <th scope="col">User Type</th>{{ if }}
                    <th scope="col">Projects</th>
                </tr>
            </thead>
            <tbody>
            {% for user in users %}
                <tr>
                    <td>{{ user.first_name }}</td>
                    <td>{{ user.last_name }}</td>
                    <td>{{ user.email }}</td>
                    <td>{{ user.user_company }}</td>
                    <td>
                        {% if user.user_type == "base_user" %}
                            Base User
                        {% elif user.user_type == "hse_inspector" %}
                            HSE Inspector
                        {% else %}
                            Project Manager
                        {% endif %}
                    </td>
                    <td>
                        <ul>
                            {% for project in user.user_projects.all %}
                            <li class="table-projects">{{ project.name }}</li>
                            {% endfor %}
                        </ul>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{% include 'footer.html' %}{% with year=year %}{% endwith %}
<script src="{% static 'webapp/users_page/js/users_page.js' %}"></script>
{% endblock %}